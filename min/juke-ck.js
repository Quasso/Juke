$(document).ready(function(){function t(t){$jukebox=$jukes.eq(t);var a=$jukebox.attr("juke-user").replace(/[\., '-\/#!$%\^&\*;:{}=\-_`~()]/g,"")||"AGoodge";console.log(a);var s=$jukebox.attr("juke-method")||"user.getrecenttracks",i=$jukebox.attr("juke-limit")||18;r=1;var c=$jukebox.attr("juke-rows")||6,o=2,n,l="",u=1,k,p=$jukebox.attr("juke-artist")||"Britney Spears";l="&user="+a;var d="http://ws.audioscrobbler.com/2.0/?method="+s+l+"&api_key="+e+"&limit="+i+"&format=json";$jukebox.height(80*c);try{$.getJSON(d,function(e){-1!=s.indexOf("getrecenttracks")&&(k=e.recenttracks.track,u=1),-1!=s.indexOf("gettoptracks")&&(k=e.toptracks.track,u=2),$.each(k,function(e,a){var r="http://ws.spotify.com/search/1/track.json?q=",s=a.name.replace(/[\.,-\/#!$%\^&\*;:{}=\-_`~()]/g,""),i,c;r+=s,1==u&&(i=a.artist["#text"],c=a.album["#text"],r+=" "+i+" "+c),2==u&&(i=a.artist.name,r+=" "+i,c="N/A"),$.getJSON(r,function(e){if("undefined"==typeof e.tracks[0]);else{var r=a.image[o]["#text"]||"http://atomlab.co.uk/images/uploads/develop.png";n='<iframe class="music_player span_18" src="https://embed.spotify.com/?uri='+e.tracks[0].href+'" height="100px" frameborder="0" allowtransparency="true"></iframe></div>',$jukes.eq(t).append('<div class="track spotipause span_24"><div class="art track_info" title="Album artwork"><img class="album_art" src="'+r+'" /></div><div class="track_info" title="'+s+'"><p class="track_name">'+s+'</p></div><div class="track_info" title="'+i+'"><p class="artist_name">'+i+'</p></div><div class="track_info" title="'+c+'"><p class="album_name">'+c+"</p></div>"+n),console.log(s+" loaded.")}})})})}catch(m){}}var e="690e1ed3bc00bc91804cd8f7fe5ed6d4",a=0,r;if($jukes=$(".juke"),1==$jukes.length)t(0);else for(var s=0;s<$jukes.length;s++)setTimeout(t(s),1e3);$(document).on("click",".track",function(){var t=1e3;$track=$(this),$track.toggleClass("spotiplay spotipause"),$track.hasClass("spotiplay")?(1===r&&$track.find("img").velocity({translateZ:0,rotateZ:[360*t,0]},{easing:"linear",duration:1500*t,mobileHA:!0}),$track.find(".music_player").velocity({translateY:["-80px",0]},{duration:250,easing:"cubic-bezier(.04,.8,.23,.69)"})):($track.find("img").velocity("stop"),$track.find(".music_player").velocity("reverse"),$track.find("img").velocity({rotateZ:0},{easing:"spring",duration:500}))}),1===a&&$(".juke-header").show()});